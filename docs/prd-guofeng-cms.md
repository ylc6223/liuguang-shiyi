# 国风历史 CMS 与站点 PRD（V1）

## 背景与目标
- 目标：构建一个“国风”风格的中国古代历史专题网站（前台）与后台发布系统（CMS）。首期覆盖历史脉络、重大事件、人物/朝代知识卡片与基础检索；后台提供内容创建、审稿与发布流。
- 成功判据（量化）：
  - M1：前后台均可无报错启动与构建；完成核心模型 CRUD；主页/时间轴/详情可用（≥3 类内容）。
  - M2：完成工作流（草稿→审核→发布）、检索/筛选、基础 SEO；P95 页面首屏 < 2.5s（主流设备）。
  - M3：完成专题合集、时间线可视化优化、画像卡片组件丰富；移动端 Lighthouse ≥ 85。

## 用户与场景
- 用户：
  - 读者（历史爱好者/学生）：检索时间线、阅读人物/事件；收藏与分享。
  - 编辑（内容发布者/审核者）：编写内容、管理媒体、提交审核与发布。
- 关键流程：
  - 读者：进入首页 → 浏览时间线 → 打开事件/人物详情 → 跳转关联 → 检索。
  - 编辑：登录后台 → 新建草稿 → 上传插图 → 提交审核 → 发布 → 前台可见。

## 范围与优先级（V1）
- Must：
  - 模型：事件、人物、朝代、标签、媒体、专题合集；时间线基础展示。
  - 后台：登录、仪表盘（总览卡片）、各模型基础 CRUD、上传媒体、发布流（草稿/审核/发布）。
  - 前台：首页、时间线、事件/人物详情页、列表与分页、基础搜索。
  - 设计：国风主题（配色/排版）、移动端适配、基础 SEO/OG。
- Should：
  - 权限：角色（管理员/编辑/审核）、操作审计。
  - 前台：筛选（朝代/主题/标签）、相关推荐与关联跳转。
  - 媒体：图片裁剪与占位图、懒加载。
- Could：
  - 互动：收藏/点赞、评论（后置）。
  - 数据导入导出、稿件对比与版本历史。
- Out of scope（V1）：实时协作、复杂推荐算法、国际化。

## 非功能需求
- 性能：
  - 前台：Next.js SSG/ISR 优先；首页/详情 P95 < 2.5s；可见内容内联首屏所需 CSS。
  - 后台：交互响应 < 100ms（本地/内网），大列表分页加载 < 1s。
- 可用性：前后台白屏崩溃率 < 0.1%；错误可恢复；空态/加载态齐备。
- 安全：鉴权、权限控制、审计日志；避免敏感信息泄露；上传文件类型校验。
- 观测：统一错误码、基础日志与页面指标；关键路径埋点。

## 风格与设计语言（国风）
- 颜色：墨黑、宣白、绛红、黛青、土黄（具体值在 design tokens 中承载）。
- 字体：宋体/思源宋体（含 SC）；适度行高、窄字重；题注/引用样式。
- 元素：纹理/水墨分隔、卷轴/玉璧图形做容器边角的轻装饰（不过度）。

## 关键页面
- 前台（web-guofeng）：
  - 首页：精选专题 + 时间线预览 + 最近更新。
  - 时间线：按朝代/世纪分段，可筛选事件类别；支持跳转详情。
  - 事件详情：时间/地点、参与人物、关联朝代/标签、参考资料。
  - 人物详情：生平、年表、关联事件与朝代、画像卡片。
  - 列表与检索：按标签/朝代/类别筛选，分页。
- 后台（admin-umi）：
  - 登录、仪表盘：指标卡（草稿数、待审、已发布）、最近编辑、快捷入口。
  - 内容管理：事件/人物/朝代/标签/媒体/专题合集的 CRUD。
  - 审核发布：草稿→待审→发布；下线/归档；操作日志。

## 依赖与边界
- Monorepo：apps（Next/Umi）+ packages（ui/tokens/utils/...）。
- 组件：shadcn/ui + Tailwind v4 统一 preset；Storybook 验证。
- 数据与接口：首期允许内置 API（Next Route Handlers/Mock）；后续可对接独立后端。

## 风险与待定
- 内容规模增长后的检索与聚合能力（需评估搜索引擎或索引方案）。
- 图片版权与优化（CDN/裁剪/格式）；时间线复杂可视化的性能。
- 后续权限粒度与审计合规要求（若接入企业场景需提前设计）。

***

> 评审要点：范围是否合理、优先级是否匹配资源、是否满足首屏体验目标与基本 SEO、后台是否满足首发能力。

